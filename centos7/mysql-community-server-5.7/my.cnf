[mysqld]
port=3306
lower_case_table_names=1
sql_mode = "STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER"

slave_parallel_type=LOGICAL_CLOCK
slave_parallel_workers=10
sync_binlog=1
innodb_flush_log_at_trx_commit=1
# https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_flush_log_at_timeout
# Controls the balance between strict ACID compliance for commit operations and higher performance that is possible when commit-related I/O operations are rearranged and done in batches. 
# You can achieve better performance by changing the default value but then you can lose transactions in a crash.
innodb_flush_log_at_timeout=1

# https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_wait_timeout default 28800 (8h）
# The number of seconds the server waits for activity on a noninteractive connection before closing it.
wait_timeout=300
# https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_interactive_timeout default 28800 (8h）
# The number of seconds the server waits for activity on an interactive connection before closing it.
interactive_timeout = 300
# If you want to use OS caching for some storage engines. 
# With InnoDB, we recommend innodb_flush_method=O_DIRECT in most cases, 
# which won’t use Operating System File Cache. However, there have been cases when using buffered IO with InnoDB made sense. 
# If you’re still running MyISAM, you will need OS cache for the “data” part of your tables.
innodb_flush_method = O_DIRECT

datadir=/var/lib/mysql
# --socket=path
# Socket file to use for local connections instead of default /tmp/mysql.sock.
# ./mysql -S /usr/local/mysql/data/mysql.sock -uroot -P13306 -p
socket=/var/lib/mysql/mysql.sock
log_error=/var/lib/mysql/mysqld.log
pid_file=/var/lib/mysql/mysqld.pid

# Disabling symbolic_links is recommended to prevent assorted security risks
symbolic_links=0

server_id=1
log_bin=/var/lib/mysql/mysql-bin

# replication settings #
master_info_repository=TABLE
relay_log_info_repository = TABLE
binlog_rows_query_log_events = 1
relay_log = relay.log
relay_log_recovery = 1
slave_rows_search_algorithms = 'INDEX_SCAN,HASH_SCAN'

log_slave_updates=1
gtid_mode=on
enforce_gtid_consistency=on
slave_skip_errors=all
binlog_format=row
binlog_ignore_db=test
binlog_ignore_db=information_schema
replicate_ignore_db=test
replicate_ignore_db=information_schema
auto_increment_increment=2
auto_increment_offset=1
expire_logs_days=90
#max_binlog_size = 100M

character_set_server=utf8mb4

[client]
default_character_set=utf8mb4

[mysql]
default_character_set=utf8mb4
port=3306
socket=/var/lib/mysql/mysql.sock
